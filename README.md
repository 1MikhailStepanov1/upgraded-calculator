# Вычислятор

### Описание алгоритма работы

Сущность, выполняющая основную работу - `UpgradedCalculator`. Данная сущность создается единожды на каждый запрос,
поступающий от клиента.

Основной процесс происходит путем передачи списка операций в метод `Execute` у сущности улучшенного калькулятора. Данный
метод параллельно выполняет операции вычислений и выводов.

Хранение значений переменных происходит внутри сущности в поле `varialbes`.

Для взаимодействия операциями "по готовности" был использован паттерн `Pub-Sub` - если для текущего исполняемого
вычисления необходима переменная, которой не было еще определено значение в поле `varialbes`, то создается канал.
Канал кладется в поле `subs` по ключу этой переменной. По вычислению данного поля происходит оповещение по всем каналам,
что появилась данная переменная и совершаются дальнейшие вычисления.

### Запуск

**HTTP server with swagger**
```shell
docker compose build calculator-http
docker compose up -d calculator-http
```

**GRPC server with swagger**
```shell
docker compose build calculator-grpc
docker compose up -d calculator-grpc
```

